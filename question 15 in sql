-- Create the selected_meal_types table
CREATE TABLE selected_meal_types (
    recipe_id INT PRIMARY KEY,
    meal_type VARCHAR(255)
);

-- Create the not_selected_meal_types table
CREATE TABLE not_selected_meal_types (
    meal_type VARCHAR(255) PRIMARY KEY
);

-- Create the trigger
CREATE TRIGGER after_insert_selected_recipes
AFTER INSERT ON selected_recipes
FOR EACH ROW
BEGIN
    INSERT INTO selected_meal_types (recipe_id, meal_type)
    SELECT NEW.recipe_id, r.meal_type
    FROM recipes r
    WHERE r.recipe_id = NEW.recipe_id;
END;

-- Create the trigger for not_selected_meal_types
CREATE TRIGGER after_insert_selected_meal_types
AFTER INSERT ON selected_meal_types
FOR EACH ROW
BEGIN
    -- Check if the meal type has never been inserted into not_selected_meal_types
    IF NOT EXISTS (
        SELECT 1
        FROM not_selected_meal_types nsmt
        WHERE nsmt.meal_type = NEW.meal_type
    ) THEN
        -- Insert into not_selected_meal_types
        INSERT INTO not_selected_meal_types (meal_type)
        VALUES (NEW.meal_type);
    END IF;
END;
